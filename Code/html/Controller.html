<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sun Dec 01 21:50:33 EST 2013 -->
<title>Controller</title>
<meta name="date" content="2013-12-01">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Controller";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Colour.Value.html" title="enum in &lt;Unnamed&gt;"><span class="strong">Prev Class</span></a></li>
<li><a href="Display.html" title="class in &lt;Unnamed&gt;"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Controller.html" target="_top">Frames</a></li>
<li><a href="Controller.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class Controller" class="title">Class Controller</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Controller</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Controller</span>
extends java.lang.Object</pre>
<div class="block">For traveling and turning we used PID controllers with zero as our
 setpoint. The PID controllers are created with
 public Controller(final float p) or
 public Controller(final float p, final float i, final float d) specifying the
 proportional, integral, and derivative gains. We used the heuristic
 Ziegler–Nichols tuning method to set the gains (very aggressively in turning,
 since when traveling a small distance, the turns must be fast.) The PID
 controller uses public float nextOutput(final float error, final float dt)
 which generalises the error and the time which that error happened. It has
 private variables which keep track of the integral and the derivative. It
 also has public void reset() and public void reset(final float limit) which
 resets the PID for use in the next control, with an optional limit. In this
 case, the actuator is the output and the limit is a speed limit, but
 generalises to other situations. We also have
 public void limitAcceleration(final float limit) and
 public void limitAcceleration(), which take in s^{-2}. Practically, the
 turnTo uses anglePID and the travelTo uses distancePID and anglePID. Roughtly
 speaking, the errors are derived from subtracting the
 Cartesian (distancePID) and angular (anglePID) coördinates from each other
 using the L^2 Euclidean norm and the circle norm respectively.
 <p>
Controller: implements float PID control with 0 as the setpoint.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Neil</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#accelerationLimit">accelerationLimit</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#derivative">derivative</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#e">e</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#eLast">eLast</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#FORGET">FORGET</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#integral">integral</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="Controller.html#isAccelerationLimit">isAccelerationLimit</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="Controller.html#isFirst">isFirst</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="Controller.html#isLimit">isLimit</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#kd">kd</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#ki">ki</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#kp">kp</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#lastPid">lastPid</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#max">max</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#min">min</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="Controller.html#Controller(float)">Controller</a></strong>(float&nbsp;p)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="Controller.html#Controller(float, float, float)">Controller</a></strong>(float&nbsp;p,
          float&nbsp;i,
          float&nbsp;d)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="Controller.html#isWithin(float)">isWithin</a></strong>(float&nbsp;tolerance)</code>
<div class="block">checking if it's w/i epsilon</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="Controller.html#isWithin(float, float)">isWithin</a></strong>(float&nbsp;tolerance,
        float&nbsp;marginal)</code>
<div class="block">checking if it's w/i epsilon and has settled</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="Controller.html#limitAcceleration()">limitAcceleration</a></strong>()</code>
<div class="block">lifts the acceleration limit</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="Controller.html#limitAcceleration(float)">limitAcceleration</a></strong>(float&nbsp;limit)</code>
<div class="block">limit acceleration; fixes stalling when battery voltage is low?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="Controller.html#nextOutput(float, float)">nextOutput</a></strong>(float&nbsp;error,
          float&nbsp;dt)</code>
<div class="block">returns the next step for the error and dt specified</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="Controller.html#reset()">reset</a></strong>()</code>
<div class="block">reset the all the state varibles; this allows the controller to
         be used more then once</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="Controller.html#reset(float)">reset</a></strong>(float&nbsp;limit)</code>
<div class="block">resets the pid and sets [limit] on the next time you use it;
         it is perfectly all right to reset(limit) the first time you use it
         to have a limit</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="Controller.html#toString()">toString</a></strong>()</code>
<div class="block">print useful things</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FORGET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORGET</h4>
<pre>private static final&nbsp;float FORGET</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="constant-values.html#Controller.FORGET">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="kp">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>kp</h4>
<pre>float kp</pre>
</li>
</ul>
<a name="ki">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ki</h4>
<pre>float ki</pre>
</li>
</ul>
<a name="kd">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>kd</h4>
<pre>float kd</pre>
</li>
</ul>
<a name="e">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>e</h4>
<pre>float e</pre>
</li>
</ul>
<a name="eLast">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>eLast</h4>
<pre>float eLast</pre>
</li>
</ul>
<a name="integral">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>integral</h4>
<pre>float integral</pre>
</li>
</ul>
<a name="derivative">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>derivative</h4>
<pre>float derivative</pre>
</li>
</ul>
<a name="min">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>min</h4>
<pre>float min</pre>
</li>
</ul>
<a name="max">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>max</h4>
<pre>float max</pre>
</li>
</ul>
<a name="lastPid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastPid</h4>
<pre>float lastPid</pre>
</li>
</ul>
<a name="accelerationLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accelerationLimit</h4>
<pre>float accelerationLimit</pre>
</li>
</ul>
<a name="isLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLimit</h4>
<pre>boolean isLimit</pre>
</li>
</ul>
<a name="isAccelerationLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAccelerationLimit</h4>
<pre>boolean isAccelerationLimit</pre>
</li>
</ul>
<a name="isFirst">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isFirst</h4>
<pre>boolean isFirst</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Controller(float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Controller</h4>
<pre>public&nbsp;Controller(float&nbsp;p)</pre>
</li>
</ul>
<a name="Controller(float, float, float)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Controller</h4>
<pre>public&nbsp;Controller(float&nbsp;p,
          float&nbsp;i,
          float&nbsp;d)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="nextOutput(float, float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextOutput</h4>
<pre>public&nbsp;float&nbsp;nextOutput(float&nbsp;error,
               float&nbsp;dt)</pre>
<div class="block">returns the next step for the error and dt specified</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>error</code> - input error</dd><dd><code>dt</code> - the time in milliseconds</dd>
<dt><span class="strong">Returns:</span></dt><dd>the output according to the pid values set</dd></dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">reset the all the state varibles; this allows the controller to
         be used more then once</div>
</li>
</ul>
<a name="reset(float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset(float&nbsp;limit)</pre>
<div class="block">resets the pid and sets [limit] on the next time you use it;
         it is perfectly all right to reset(limit) the first time you use it
         to have a limit</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>limit</code> - The limit (-/+) on the output and past which it will not
         record the integral.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the limit <= 0</dd></dl>
</li>
</ul>
<a name="limitAcceleration(float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>limitAcceleration</h4>
<pre>public&nbsp;void&nbsp;limitAcceleration(float&nbsp;limit)</pre>
<div class="block">limit acceleration; fixes stalling when battery voltage is low?</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>limit</code> - in /s</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the limit <= 0</dd></dl>
</li>
</ul>
<a name="limitAcceleration()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>limitAcceleration</h4>
<pre>public&nbsp;void&nbsp;limitAcceleration()</pre>
<div class="block">lifts the acceleration limit</div>
</li>
</ul>
<a name="isWithin(float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWithin</h4>
<pre>public&nbsp;boolean&nbsp;isWithin(float&nbsp;tolerance)</pre>
<div class="block">checking if it's w/i epsilon</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tolerance</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the last error is within tolerance.</dd></dl>
</li>
</ul>
<a name="isWithin(float, float)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWithin</h4>
<pre>public&nbsp;boolean&nbsp;isWithin(float&nbsp;tolerance,
               float&nbsp;marginal)</pre>
<div class="block">checking if it's w/i epsilon and has settled</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tolerance</code> - </dd><dd><code>marginal</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the last error is within tolerance and marginal
         tolerance.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">print useful things</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Colour.Value.html" title="enum in &lt;Unnamed&gt;"><span class="strong">Prev Class</span></a></li>
<li><a href="Display.html" title="class in &lt;Unnamed&gt;"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?Controller.html" target="_top">Frames</a></li>
<li><a href="Controller.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
